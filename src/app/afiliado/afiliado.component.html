
<app-nav></app-nav>

<div class="component-container">
  <div class="page-head">
    <i class="fa fa-chevron-left fa-3x" id="return" aria-hidden="true" routerLink="/menu-admin"></i>
    <h1 class="page-title">{{titulo}}</h1>
  </div>
  <div class="page-main">
    <div class="page-section">
      <div class="row">
        <table class="table table-hovered">
          <thead>
          <tr>
            <th>Nombre</th>
            <th>Afiliaci&oacute;n</th>
            <th>Saldo</th>
            <th>Compras</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let afl of afiliados | async | paginate: { itemsPerPage: 10, currentPage: p }">
            <td>{{ afl.nombre }}</td>
            <td>{{ afl.fechaAfiliacion }}</td>
            <td>{{ afl.saldo }}</td>
            <td >
              <button class="btn btn-primary " style="width: 40%" (click)="openModalAfiliado(afl.$key, afl.nombre, afl.saldo)"> Recargar </button>

            </td>

          </tr>
          </tbody>
        </table>
        <!-- Pagination -->
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </div>

  </div>
</div>


<modal #modalAfiliado>
  <modal-header >
    <h4 class="modal-title">Recargar</h4>
  </modal-header>

  <modal-body>
    <ul class="list-group" style="padding-top: 5%">
      <li class="list-group-item"><strong>Nombre:</strong> &nbsp;&nbsp; <kbd>{{afiliado.nombre}}</kbd></li>
      <li class="list-group-item"><strong>Saldo Actual:</strong> &nbsp;&nbsp; <kbd>${{afiliado.saldo}}</kbd></li>

      <li class="list-group-item"><strong>Saldo a Recargar:</strong> &nbsp;&nbsp; &nbsp;&nbsp;

        <label class="radio-inline"><input type="radio" name="optradio" value="5" [(ngModel)]="radioValue" ><h5>$5</h5></label>
        <label class="radio-inline"><input type="radio" name="optradio" value="10" [(ngModel)]="radioValue"  ><h5>$10</h5></label>
        <label class="radio-inline"><input type="radio" name="optradio" value="20" [(ngModel)]="radioValue"  ><h5>$20</h5></label>

      </li>
      <li class="list-group-item"><button type="button" class="btn btn-primary" (click)="modalVerificar.open()"> Recargar <i class="fa fa-plus-circle" aria-hidden="true"></i></button></li>
    </ul>
  </modal-body>

  <modal-footer>
    <button type="button" class="btn btn-danger col-lg-5" (click)="modal.close()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>

  </modal-footer>
</modal>
<modal #modalVerificar>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Confirmaci√≥n de Recarga</h4>
  </modal-header>

  <modal-body>
    <h3>
      Abonar <kbd> {{this.radioValue}} $ </kbd> &nbsp; al cliente/a &nbsp;"{{afiliado.nombre}}"<br>
    </h3>
  </modal-body>

  <modal-footer>
    <button type="button" class="btn btn-primary col-lg-5" (click)="recargar()"><span class="glyphicon glyphicon-check"></span> Aceptar</button>
    <button type="button" class="btn btn-danger col-lg-5" (click)="modalVerificar.close()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
  </modal-footer>
</modal>
<modal #modalRecargaExitosa>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Mensaje</h4>
  </modal-header>

  <modal-body >
    <h3>
      Recargar correctamente Realizada
    </h3>
  </modal-body>

  <modal-footer style="text-align: center">
    <button type="button" class="btn btn-primary col-lg-5" data-dismiss="modal"><i class="fa fa-check-square" aria-hidden="true"></i> Aceptar</button>
  </modal-footer>
</modal>




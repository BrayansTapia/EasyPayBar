<app-nav></app-nav>
<div class="container">
	<h1>{{ titulo }}</h1>	
	<table class="table table-hovered">
	  <thead>
	  	<tr>
	  		<th>Nombre</th>
	  		<th>Afiliaci&oacute;n</th>
	  		<th>Estado</th>
	  		<th>Proveedor</th>	  		
	  	</tr>
	  </thead>  
	  <tbody>
	  	<tr *ngFor="let cli of clientes | async | paginate: { itemsPerPage: 10, currentPage: p }">
	  		<td>{{ cli.nombre }}</td>
	  		<td>{{ cli.fecha_Afiliacion }}</td>
	  		<td>{{ cli.estado ? 'Activo' : 'Inactivo' }}</td>
	  		<td [ngSwitch]="cli.proveedor">
	  			<span *ngSwitchCase="false">
	  				<button class="btn btn-sm btn-success" (click)="openModalCliente(cli.$key, cli.nombre, cli.proveedor)"><span class="glyphicon glyphicon-plus"></span></button>	
	  			</span>
	  			<span *ngSwitchDefault>
	  				<button class="btn btn-sm btn-primary" (click)="openModalCliente(cli.$key, cli.nombre, cli.proveedor)"><span class="glyphicon glyphicon-user"></span></button>	
	  			</span>
	  		</td>
	  	</tr>
	  </tbody>
	</table>	

	<!-- Pagination -->
	<pagination-controls (pageChange)="p = $event"></pagination-controls>

</div>


<!-- Modal -->
<modal #modalCliente>
	<modal-header [show-close]="true">
		<div [ngSwitch]="proveedorCliente">
			<span *ngSwitchCase="false">
	  			<h4 class="modal-title">¿Desea Promover a este Cliente a Proveedor?</h4>
	  		</span>
			<span *ngSwitchDefault>
	  			<h4 class="modal-title">¿Desea Promover a este Proveedor a Cliente?</h4>
	  		</span>
		</div>
	</modal-header>

	<modal-body>
	  	Nombre: {{ nombreCliente }}
	</modal-body>

	<modal-footer>
	  	<div [ngSwitch]="proveedorCliente">
	  		<span *ngSwitchCase="false">
	  			<button type="button" class="btn btn-primary" data-dismiss="modal" (click)="updateToProveedor(idCliente, nombreCliente)"><span class="glyphicon glyphicon-check"></span> Confirmar</button>
	  		</span>
	  				
	  		<span *ngSwitchDefault>
	  			<button type="button" class="btn btn-primary" data-dismiss="modal" (click)="updateToCliente(idCliente, nombreCliente)"><span class="glyphicon glyphicon-check"></span> Confirmar</button>
	  		</span>

	  	</div>
	  				
	  	<button type="button" class="btn btn-danger" (click)="modal.close()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
	  			
	</modal-footer>
</modal>


<app-nav></app-nav>

<div class="component-container">
  <div class="page-head">
    <i class="fa fa-chevron-left fa-3x" id="return" aria-hidden="true" routerLink="/menu-admin"></i>
    <h1 class="page-title">{{ titulo }}</h1>
  </div>
  <div class="page-main">
    <div class="page-section">
      <div class="row">
        <button class="btn btn-success" (click)="modalCrear.open()"><span class="glyphicon glyphicon-plus"></span> Crear nuevo producto</button>
        <table class="table table-hovered">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Precio</th>
              <th>Veces Compradas</th>
              <th>Imagen</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
          <tr *ngFor="let produc of productos | async | paginate: { itemsPerPage: 5, currentPage: p }">


              <td class="text-center">{{produc.nombre}}</td>
              <td class="text-center">${{produc.precio}}</td>
              <td class="text-center">{{produc.veces}}</td>
              <td class="text-center"><img src="{{produc.imagen}}" class="img-rounded" alt="Cinque Terre" ></td>

              <td><button class="btn btn-primary btn-sm" (click)="openModalProductoEditar(produc.$key, produc.nombre, produc.precio, produc.veces)"><span class="glyphicon glyphicon-pencil"></span> </button></td>

              <td><button class="btn btn-danger btn-sm" (click)="openModalProductoEliminar(produc.$key, produc.nombre, produc.precio, produc.veces)"><span class="glyphicon glyphicon-remove"></span> </button></td>
            </tr>
          </tbody>
        </table>
        <!-- Pagination -->
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </div>
  </div>

</div>




<!-- Modal Eliminar -->
<modal #modalProductoEliminar>
  <modal-header [show-close]="true">
      <h4 class="modal-title">¿Desea Eliminar este Producto?</h4>
  </modal-header>

  <modal-body>
    Nombre: {{ producto.nombre }}
  </modal-body>


      <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="deleteProducto()"><span class="glyphicon glyphicon-check"></span> Confirmar</button>
      <button type="button" class="btn btn-danger" style="margin-left: 0px" (click)="modalEliminar.close()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>

</modal>

<!-- Modal Crear -->
<modal #modalProductoCrear>
  <modal-header [show-close]="true">
      <h4 class="modal-title">Registro De Nuevo Producto</h4>
  </modal-header>

  <modal-body>
    <div class="form-group">
      <label >Nombre</label>
      <input type="text" class="form-control"  name="txtnombre" placeholder="Ingrese el nombre" [(ngModel)]="producto.nombre"
             >
    </div>
    <div class="form-group">
      <label >Precio</label>
      <input type="text" class="form-control"  name="txtprecio" placeholder="Ingrese el precio" [(ngModel)]="producto.precio"
             >
    </div>
    <div class="form-group">
      <label >Veces</label>
      <input type="text" class="form-control"  name="txtveces" placeholder="Ingrese la cantidad comprada" [(ngModel)]="producto.veces"
             >
    </div>
    <div class="form-group">
      <label >Imagen</label>
      <input type="file"   name="file" id="file" [(ngModel)]="producto.imagen"
            >
    </div>

  </modal-body>

  <modal-footer >
    <div style="padding-left: 10%">
      <button type="button" class="btn btn-primary col-lg-5" data-dismiss="modal" (click)="addProducto()"><span class="glyphicon glyphicon-check"></span> Confirmar</button>
      <button type="button" class="btn btn-danger col-lg-5" (click)="modalCrear.close()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
    </div>
  </modal-footer>
</modal>

<!-- Modal Editar -->
<modal #modalProductoModificar>
  <modal-header [show-close]="true">
      <h4 class="modal-title">¿Desea Editar este Producto?</h4>
  </modal-header>

  <modal-body>
      <div class="form-group">
          <label class="col-lg-3 control-label">Nombre:</label>
          <div class="col-lg-6">
              <input type="text" class="form-control" name="txtnombre" [value]="producto.nombre" [(ngModel)]="producto.nombre" placeholder="Ingrese el nombre" />
          </div>
      </div>
    <div class="form-group">
          <label class="col-lg-3 control-label">Precio:</label>
          <div class="col-lg-6">
              <input type="text" class="form-control" name="txtprecio" [value]="producto.precio" [(ngModel)]="producto.precio" placeholder="Ingrese el precio" />
          </div>
      </div>

      <div class="form-group">
          <label class="col-lg-3 control-label">Veces:</label>
          <div class="col-lg-6">
              <input type="text" class="form-control" name="txtveces" [value]="producto.veces" [(ngModel)]="producto.veces" placeholder="Ingrese las veces" />
          </div>
      </div>

    </modal-body>

  <modal-footer>
      <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="updateProducto()"><span class="glyphicon glyphicon-check"></span> Confirmar</button>
      <button type="button" class="btn btn-danger" (click)="modalModificar.close()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
  </modal-footer>
</modal>
